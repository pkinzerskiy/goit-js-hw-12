{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\"use strict\";\n\nimport axios from \"axios\";\nconst myKey = \"49810610-79c0179868d457ece08d99a45\";\n// import { PER_PAGE } from \"./../main.js\";\n\nexport async function getImagesByQuery({query, page, PER_PAGE}) {\n    console.log(\"query\",PER_PAGE );\n   return await axios(\"https://pixabay.com/api/\", {\n        params: {\n            key: myKey,\n            q: query,\n            per_page: PER_PAGE,\n            page: page,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true\n        }\n    })\n}\n\n","\"use strict\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst container = document.querySelector(\".gallery\");\n// приймає масив images, створювати HTML-розмітку для галереї, додавати її в контейнер галереї та викликати метод екземпляра SimpleLightbox refresh(). Нічого не повертає.\nconst load = document.querySelector(\"span\");\nconst loadMore = document.querySelector(\".load_more\");\n\n//import { PER_PAGE } from \"./../main.js\";\n\nexport function createGallery(images) {\n  let markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n  <a class=\"item-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n    <ul class=\"statistic-list\">\n      <li class=\"statistic-item\">\n        <p class=\"statistic-text\">Likes</p>\n        <p class=\"statistic-value\">${likes}</p>\n      </li>\n      <li class=\"statistic-item\">\n        <p class=\"statistic-text\">Views</p>\n        <p class=\"statistic-value\">${views}</p>\n      </li>\n      <li class=\"statistic-item\">\n        <p class=\"statistic-text\">Comments</p>\n        <p class=\"statistic-value\">${comments}</p>\n      </li>\n      <li class=\"statistic-item\">\n        <p class=\"statistic-text\">Downloads</p>\n        <p class=\"statistic-value\">${downloads}</p>\n      </li>\n    </ul></a\n  >\n</li>`\n    )\n    .join('');\n    container.insertAdjacentHTML('beforeend', markup);\n};\n\nexport function createLightBox() {\n  let galleryLightBox = new SimpleLightbox('.gallery li a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  galleryLightBox.refresh();\n}\n\n// нічого не приймає та повинна очищати вміст контейнера галереї. Нічого не повертає.\nexport function clearGallery() {\n    container.innerHTML = '';\n};\n// повинна додавати клас для відображення лоадера. Нічого не повертає.\nexport function showLoader() {\n  load.classList.add('loader');\n};\n//нічого не приймає, повинна прибирати клас для відображення лоадера. Нічого не повертає.\nexport function hideLoader() {\n  load.classList.remove('loader');  \n};\n\nexport function statusBtnLoadMore({ page, totalHits, PER_PAGE } ) {\n  let totalPage = Math.ceil(totalHits / PER_PAGE);\n  if (totalPage > page) {\n    showLoadMoreButton();\n  } else {\n    hideLoadMoreButton();\n    message(\"We're sorry, but you've reached the end of search results.\", 'blue');\n  }\n}\n\n  export function showLoadMoreButton() {\n    loadMore.classList.remove('hidden');\n  }\n\n  export function hideLoadMoreButton() {\n    loadMore.classList.add('hidden');\n  }\n\n  export function message(msg, color) {\n    iziToast.show({\n      message: msg,\n      messageColor: 'white', // blue, red, \n      backgroundColor: color,\n      position: 'topRight',\n      iconUrl: './error_outline.svg',\n      iconColor: 'white',\n    })\n  }\n\n","\"use strict\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport { createGallery, clearGallery, showLoader, hideLoader, createLightBox, statusBtnLoadMore, hideLoadMoreButton, message} from './js/render-functions.js';\n\nconst form = document.querySelector(\"form\");\nform.addEventListener(\"submit\", processingBtn);\n\nconst container = document.querySelector(\".gallery\");\n\nconst loadMore = document.querySelector(\".load_more\");\nloadMore.addEventListener(\"click\", loadMoreBtn);\n\nlet query;\nlet page;\n// let totalHits = 0;\nconst PER_PAGE = 15;\n\nhideLoader()\n\nfunction processingBtn(event) {\n    event.preventDefault();\n    clearGallery();\n    if (page) {\n        hideLoadMoreButton();\n    }\n    query = event.target.elements.searchText.value.trim();\n    \n    if (query.match(/^\\u0020{0,}$/)) {\n        message('Sorry, Please input query!');\n        clearGallery();\n        return;\n    }\n    showLoader();\n    page = 1;\n    getQuery({query, page, PER_PAGE});\n    createLightBox();\n}\n\nasync function getQuery({query, page, PER_PAGE}) {\n\n    try {\n        const response = await getImagesByQuery({ query, page, PER_PAGE });\n            let data = response.data.hits;\n            let totalHits = (response.data.totalHits);\n            \n            if (!response.data.hits.length) {    \n                hideLoader();\n                message('Sorry, there are no images matching your search query. Please try again!', 'red');\n                return;\n            }\n            hideLoader();\n            let markup = createGallery(data);\n            statusBtnLoadMore({ page, totalHits, PER_PAGE });\n         \n        }\n        catch (error) {\n            console.log(error.message);\n    };\n    if (page > 1) {\n        scroll();\n    }\n    form.reset();\n}\n\n\nfunction loadMoreBtn(event) {\n    ++page;\n    hideLoadMoreButton();\n    showLoader();\n    getQuery({query, page, PER_PAGE});\n}\n\nfunction scroll() {\n    const el = document.querySelector(\".gallery-item\");\n    let rect = el.getBoundingClientRect();\n      window.scrollBy({\n        top: (rect.height * 2),\n        behavior: \"smooth\",\n      });\n    }\n  "],"names":["myKey","getImagesByQuery","query","page","PER_PAGE","axios","container","load","loadMore","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","createLightBox","SimpleLightbox","clearGallery","showLoader","hideLoader","statusBtnLoadMore","totalHits","showLoadMoreButton","hideLoadMoreButton","message","msg","color","iziToast","form","processingBtn","loadMoreBtn","event","getQuery","response","data","error","scroll","rect"],"mappings":"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"}