{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\"use strict\";\n\nimport axios from \"axios\";\nconst myKey = \"49810610-79c0179868d457ece08d99a45\";\n\nexport const PER_PAGE = 15;\n\n\nexport function getImagesByQuery(query, page) {\n    // console.log(\"query\",query );\n   return axios(\"https://pixabay.com/api/\", {\n        params: {\n            key: myKey,\n            q: query,\n            per_page: PER_PAGE,\n            page: page,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true\n        }\n    })\n}\n\n","\"use strict\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst container = document.querySelector(\".gallery\");\n// приймає масив images, створювати HTML-розмітку для галереї, додавати її в контейнер галереї та викликати метод екземпляра SimpleLightbox refresh(). Нічого не повертає.\nconst load = document.querySelector(\"span\");\nconst loadMore = document.querySelector(\".load_more\");\n// const btnMore = document.querySelector(\"\");\nimport {PER_PAGE} from \"./pixabay-api.js\";;\n\nexport function createGallery(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n  <a class=\"item-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n    <ul class=\"statistic-list\">\n      <li class=\"statistic-item\">\n        <p class=\"statistic-text\">Likes</p>\n        <p class=\"statistic-value\">${likes}</p>\n      </li>\n      <li class=\"statistic-item\">\n        <p class=\"statistic-text\">Views</p>\n        <p class=\"statistic-value\">${views}</p>\n      </li>\n      <li class=\"statistic-item\">\n        <p class=\"statistic-text\">Comments</p>\n        <p class=\"statistic-value\">${comments}</p>\n      </li>\n      <li class=\"statistic-item\">\n        <p class=\"statistic-text\">Downloads</p>\n        <p class=\"statistic-value\">${downloads}</p>\n      </li>\n    </ul></a\n  >\n</li>`\n    )\n    .join('');\n};\n\nexport function createLightBox() {\n  let galleryLightBox = new SimpleLightbox('.gallery li a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  galleryLightBox.refresh();\n}\n\n// нічого не приймає та повинна очищати вміст контейнера галереї. Нічого не повертає.\nexport function clearGallery() {\n    container.innerHTML = '';\n};\n// повинна додавати клас для відображення лоадера. Нічого не повертає.\nexport function showLoader() {\n  load.classList.add('loader');\n};\n//нічого не приймає, повинна прибирати клас для відображення лоадера. Нічого не повертає.\nexport function hideLoader() {\n  load.classList.remove('loader');  \n};\n\nexport function statusBtnLoadMore(page, totalHits) {\n  let totalPage = Math.ceil(totalHits / PER_PAGE);\n  if (totalPage > page) {\n    showLoadMoreButton();\n  } else {\n    hideLoadMoreButton();\n    message(\"We're sorry, but you've reached the end of search results.\", 'blue');\n  }\n}\n\n  export function showLoadMoreButton() {\n    loadMore.classList.remove('hidden');\n  }\n\n  export function hideLoadMoreButton() {\n    loadMore.classList.add('hidden');\n  }\n\n  export function message(msg, color) {\n    iziToast.show({\n      message: msg,\n      messageColor: 'white', // blue, red, \n      backgroundColor: color,\n      position: 'topRight',\n      iconUrl: './../img/error_outline.svg',\n      iconColor: 'white',\n    })\n  }\n\n","\"use strict\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport { createGallery, clearGallery, showLoader, hideLoader, createLightBox, statusBtnLoadMore, hideLoadMoreButton, message} from './js/render-functions.js';\n\nconst form = document.querySelector(\"form\");\nform.addEventListener(\"submit\", processingBtn);\n\nconst container = document.querySelector(\".gallery\");\n\nconst loadMore = document.querySelector(\".load_more\");\nloadMore.addEventListener(\"click\", loadMoreBtn);\n\nlet query;\nlet page;\nlet totalHits = 0;\n\nhideLoader()\n\nfunction processingBtn(event) {\n    event.preventDefault();\n    clearGallery();\n\n    query = event.target.elements.searchText.value.trim();\n    \n    if (query.match(/^\\u0020{0,}$/)) {\n        message('Sorry, Please input query!');\n        clearGallery();\n        return;\n    }\n    showLoader();\n    page = 1;\n    getQuery(query, page);\n}\n\nasync function getQuery(query, page) {\n\n        try {\n            const response = await getImagesByQuery(query, page);\n            let data = response.data.hits;\n            totalHits = (response.data.totalHits);\n            \n            if (!response.data.hits.length) {    \n                hideLoader();\n                message('Sorry, there are no images matching your search query. Please try again!', 'red');\n                return;\n            }\n            hideLoader();\n            let markup = createGallery(data);\n            container.insertAdjacentHTML('beforeend', markup);\n            createLightBox();\n            statusBtnLoadMore(page, totalHits);\n         \n        }\n        catch (error) {\n            console.log(error.message);\n    };\n    if (page > 1) {\n        scroll();\n    }\n    form.reset();\n}\n\n\nfunction loadMoreBtn(event) {\n    ++page;\n    hideLoadMoreButton();\n    showLoader();\n    getQuery(query, page);\n}\n\nfunction scroll() {\n    const el = document.querySelector(\".gallery-item\");\n    let rect = el.getBoundingClientRect();\n      window.scrollBy({\n        top: (rect.height * 2),\n        behavior: \"smooth\",\n      });\n    }\n  "],"names":["myKey","PER_PAGE","getImagesByQuery","query","page","axios","container","load","loadMore","createGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","createLightBox","SimpleLightbox","clearGallery","showLoader","hideLoader","statusBtnLoadMore","totalHits","showLoadMoreButton","hideLoadMoreButton","message","msg","color","iziToast","form","processingBtn","loadMoreBtn","event","getQuery","response","data","markup","error","scroll","rect"],"mappings":"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"}